<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQI-Monitor</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind for custom colors and Inter font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'aqi-good': '#00e676',      
                        'aqi-moderate': '#ffea00',  
                        'aqi-poor': '#ff9100',      
                        'aqi-unhealthy': '#ff1744', 
                        'aqi-severe': '#d500f9',    
                        'aqi-hazardous': '#3e2723', 
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>
    <!-- Inter Font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200..800&display=swap" rel="stylesheet">
    <style>
        /* Modern Gradient Background */
        body {
            background-color: #000;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-attachment: fixed;
            color: #ffffff;
        }

        /* Glassmorphism Card */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* Gauge Styling */
        .gauge-track {
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 8;
        }
        .gauge-value {
            stroke-width: 8;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1), stroke 0.5s ease;
        }

        /* Smooth Fade In */
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 font-sans antialiased selection:bg-pink-500 selection:text-white">

    <div class="w-full max-w-4xl">
        
        <!-- Header Section -->
        <header class="mb-8 text-center fade-in" style="animation-delay: 0.1s;">
            <div class="inline-flex items-center space-x-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-4">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                <span class="text-xs font-medium text-gray-400 tracking-wide uppercase">Live Monitor</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-light tracking-tight text-white mb-2">
                Mumbai <span class="font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">Air Quality</span>
            </h1>
            <p id="last-updated" class="text-sm text-gray-500 font-light">Connecting to satellite data...</p>
        </header>

        <!-- Main Content Grid -->
        <main class="grid grid-cols-1 md:grid-cols-2 gap-6 fade-in" style="animation-delay: 0.2s;">
            
            <!-- Left Column: The Gauge -->
            <div class="glass-panel rounded-3xl p-8 flex flex-col items-center justify-center relative overflow-hidden group">
                <!-- Ambient Glow behind gauge -->
                <div id="ambient-glow" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-blue-500/20 rounded-full blur-[60px] transition-colors duration-1000"></div>
                
                <div class="relative w-64 h-64">
                    <svg viewBox="0 0 200 200" class="w-full h-full transform group-hover:scale-105 transition-transform duration-700">
                        <circle cx="100" cy="100" r="80" fill="none" class="gauge-track" />
                        <circle id="gauge-arc" cx="100" cy="100" r="80" fill="none" class="gauge-value" stroke-dasharray="502" stroke-dashoffset="502" />
                    </svg>
                    
                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                        <span id="aqi-value" class="text-7xl font-light text-white tracking-tighter">--</span>
                        <span class="text-sm uppercase tracking-widest text-gray-500 font-semibold mt-2">US AQI</span>
                    </div>
                </div>

                <div id="aqi-status" class="mt-6 px-6 py-2 rounded-full border border-white/10 bg-white/5 text-lg font-medium tracking-wide">
                    Initializing...
                </div>
            </div>

            <!-- Right Column: Details & Advisory -->
            <div class="flex flex-col gap-6">
                
                <!-- Pollutant Breakdown (Mini Cards) -->
                <div class="glass-panel rounded-3xl p-6 flex-1">
                    <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-6">Key Pollutants</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <!-- PM2.5 -->
                        <div class="p-4 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-gray-400 text-sm">PM2.5</span>
                                <span class="text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300">Fine</span>
                            </div>
                            <div class="flex items-baseline gap-1">
                                <span id="pm25-val" class="text-2xl font-semibold text-white">--</span>
                                <span class="text-xs text-gray-500">µg/m³</span>
                            </div>
                        </div>
                        <!-- PM10 -->
                        <div class="p-4 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-gray-400 text-sm">PM10</span>
                                <span class="text-xs px-2 py-0.5 rounded bg-gray-700 text-gray-300">Coarse</span>
                            </div>
                            <div class="flex items-baseline gap-1">
                                <span id="pm10-val" class="text-2xl font-semibold text-white">--</span>
                                <span class="text-xs text-gray-500">µg/m³</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Health Advisory -->
                <div class="glass-panel rounded-3xl p-6 flex-1">
                    <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest mb-4">Health Recommendation</h3>
                    <div id="health-advice" class="text-gray-200 text-sm leading-relaxed space-y-3 font-light">
                        <p class="animate-pulse text-gray-500">Waiting for data...</p>
                    </div>
                </div>

            </div>
        </main>

        <!-- Modern Linear Scale Legend -->
        <div class="mt-8 glass-panel rounded-full p-2 fade-in" style="animation-delay: 0.3s;">
            <div class="relative h-2 w-full rounded-full overflow-hidden flex">
                <div class="h-full bg-aqi-good flex-1"></div>
                <div class="h-full bg-aqi-moderate flex-1"></div>
                <div class="h-full bg-aqi-poor flex-1"></div>
                <div class="h-full bg-aqi-unhealthy flex-1"></div>
                <div class="h-full bg-aqi-severe flex-1"></div>
                <div class="h-full bg-aqi-hazardous flex-1"></div>
                
                <!-- Dynamic Marker -->
                <div id="scale-marker" class="absolute top-0 bottom-0 w-1 bg-white shadow-[0_0_10px_rgba(255,255,255,0.8)] transition-all duration-1000 ease-out" style="left: 0%"></div>
            </div>
            <div class="flex justify-between px-2 mt-2 text-[10px] uppercase tracking-widest text-gray-500 font-medium">
                <span>Good</span>
                <span>Hazardous</span>
            </div>
        </div>

        <!-- Creator Footer -->
        <footer class="mt-12 mb-8 text-center fade-in" style="animation-delay: 0.4s;">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://www.linkedin.com/in/rajatkumar7/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors duration-300 transform hover:scale-110">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
                <a href="https://github.com/rajatkumar1011" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors duration-300 transform hover:scale-110">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></svg>
                </a>
            </div>
            <p class="text-sm text-white font-light mb-1">Made with <span class="text-red-500">❤️</span> by Rajat Kumar</p>
            <p class="text-xs text-white font-light">Copyright © 2025 Rajat Kumar. All Rights Reserved.</p>
        </footer>

    </div>

    <script>
        (function() {
            // Circle Config: 2 * PI * 80 = ~502.65
            const CIRCUMFERENCE = 502;
            
            function getAqiStatus(aqi) {
                if (aqi >= 301) return { label: "Hazardous", color: "text-aqi-hazardous", hex: "#3e2723", advice: "Emergency conditions. Avoid all outdoor physical activity." };
                if (aqi >= 201) return { label: "Very Unhealthy", color: "text-aqi-severe", hex: "#d500f9", advice: "Health alert. The risk of health effects is increased for everyone." };
                if (aqi >= 151) return { label: "Unhealthy", color: "text-aqi-unhealthy", hex: "#ff1744", advice: "Sensitive groups may experience serious effects. Wear a mask outdoors." };
                if (aqi >= 101) return { label: "Poor", color: "text-aqi-poor", hex: "#ff9100", advice: "Unhealthy for sensitive groups. Limit prolonged outdoor exertion." };
                if (aqi >= 51) return { label: "Moderate", color: "text-aqi-moderate", hex: "#ffea00", advice: "Acceptable quality. Sensitive individuals should monitor conditions." };
                return { label: "Good", color: "text-aqi-good", hex: "#00e676", advice: "Air quality is satisfactory. Enjoy your outdoor activities." };
            }

            function updateUI(data) {
                const aqi = data.us_aqi;
                const status = getAqiStatus(aqi);
                
                // 1. Update Gauge Arc
                const arc = document.getElementById('gauge-arc');
                const maxVal = 400; // Visual Cap
                const percent = Math.min(aqi / maxVal, 1);
                const offset = CIRCUMFERENCE - (percent * CIRCUMFERENCE);
                
                arc.style.stroke = status.hex;
                arc.style.strokeDashoffset = offset;

                // 2. Update Glow
                const glow = document.getElementById('ambient-glow');
                glow.style.backgroundColor = status.hex + '40'; // 25% opacity

                // 3. Update Text
                document.getElementById('aqi-value').textContent = aqi;
                
                const statusEl = document.getElementById('aqi-status');
                statusEl.textContent = status.label;
                statusEl.style.color = status.hex;
                statusEl.style.borderColor = status.hex + '30';
                statusEl.style.backgroundColor = status.hex + '10';

                // 4. Update Pollutants
                document.getElementById('pm25-val').textContent = data.pm2_5;
                document.getElementById('pm10-val').textContent = data.pm10;

                // 5. Update Advice
                const adviceContainer = document.getElementById('health-advice');
                adviceContainer.innerHTML = `<p>${status.advice}</p>`;

                // 6. Update Scale Marker
                const marker = document.getElementById('scale-marker');
                // Calculate position percentage based on 0-500 scale
                const position = Math.min((aqi / 500) * 100, 100);
                marker.style.left = `${position}%`;

                // 7. Update Timestamp
                const date = new Date(data.time);
                const day = String(date.getDate()).padStart(2, '0');
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const year = date.getFullYear();
                const timeStr = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                document.getElementById('last-updated').textContent = `Last update: ${day}/${month}/${year} ${timeStr}`;
            }

            async function fetchData() {
                try {
                    // Mumbai Coords
                    const res = await fetch('https://air-quality-api.open-meteo.com/v1/air-quality?latitude=19.0760&longitude=72.8777&current=us_aqi,pm10,pm2_5&timezone=auto');
                    if (!res.ok) throw new Error('Network error');
                    const json = await res.json();
                    
                    if (json.current) {
                        updateUI(json.current);
                    }
                } catch (e) {
                    console.error(e);
                    document.getElementById('health-advice').innerHTML = '<span class="text-red-400">Unable to fetch live data. Retrying...</span>';
                }
            }

            // Init
            fetchData();
            setInterval(fetchData, 60000 * 5); // 5 mins
        })();
    </script>
</body>
</html>
